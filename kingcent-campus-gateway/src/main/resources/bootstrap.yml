server:
  port: 6630

spring:
  application:
    name: kingcent-campus-gateway
  cloud:
    nacos:
      discovery:
        server-addr: 175.178.107.254:8848
        username: nacos
        password: nacosnacos666

  # 静态路由
    gateway:
      globalcors:
        corsConfigurations:
          '[/**]':
            allowedOrigins: "http://localhost:6630/"
            allowedMethods:
              - GET
              - POST
              - DELETE
              - PUT
      enabled: true
      routes:

      #商城服务
      - id: shop
        uri: lb://kingcent-campus-shop
        predicates:
          - Path=/shop/**
        filters:
          - StripPrefix=1

      #鉴权
      - id: auth
        uri: lb://kingcent-campus-auth
        predicates:
          - Path=/auth/**
        filters:
          - StripPrefix=1

        #后台
      - id: auth
        uri: lb://kingcent-campus-admin
        predicates:
          - Path=/admin/**
        filters:
          - StripPrefix=1


# 鉴权配置
auth:
  # 鉴权时放行的路径（白名单）
  ignore-path:
    - /auth/login/**  #登录
    - /shop/goods/fetch/**  #商品列表
    - /shop/goods/search/**  #搜索商品
    - /shop/goods/details/**  #商品详情
    - /shop/category/list/**  #分类目录
    - /shop/goods_comment/preview/**  #评论预览
    - /shop/address/nearby_group/** #获取附近楼栋
    - /shop/address/nearest_group/**  #获取最近楼栋
    - /shop/want/keywords #获取”想要“关键词
    - /shop/wx_notify/**  #微信接口回调
    - /shop/order/refund_reasons/** #退款原因
    - /admin/goods/test #测试接口
    - /admin/file/upload/** #上传文件